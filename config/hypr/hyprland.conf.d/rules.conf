###############################################################################
### Rules for windows and workspaces                                        ###
###                                                                         ###
### See:                                                                    ###
###   https://wiki.hyprland.org/Configuring/Window-Rules/                   ###
###   https://wiki.hyprland.org/Configuring/Workspace-Rules/                ###
###############################################################################

### General layout
###############################################################################

# Focused window gets no rounding:
windowrule {
  name = no-rounding-focused
  rounding = 0
  match:focus = 1
}

# No rouding and borders on fullscreen and maximized windows:
windowrule {
  name = no-rounding-maximized-fullscreen
  rounding = 0
  border_size = 0
  match:float = 0
  match:workspace = f[1]
}

# No rounding and borders if there's only one visible window:
windowrule {
  name = no-rounding-only-window
  border_size = 0
  rounding = 0
  match:float = 0
  match:workspace = w[tv1]
}

# No gaps if there's only one visible window or if one is maximized:
workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0

# Ignore maximize requests from apps. You'll probably like this.
windowrule {
  name = ignore-maximize-requests
  suppress_event = maximize
  match:class = .*
}

# All floating windows are centered by default (avoiding steam's popups):
windowrule {
  name = centered-float
  center = on,
  match:float = 1
  match:title = negative:(^$|vmware)
}



### Xwayland hacks
###############################################################################

# Fix some dragging issues with XWayland:
windowrule {
  name = xwayland-drag
  no_focus = on
  match:class = ^$
  match:title = ^$
  match:xwayland = 1
  match:float = 1
  match:fullscreen = 0
  match:pin = 0
}

# Screen sharing:
windowrule {
  name = xwayland-screensharing
  opacity = 0.0 override
  no_anim = on
  no_initial_focus = on
  max_size = 1 1
  no_blur = on
  no_focus = on
  match:class = ^(xwaylandvideobridge)$
}



### Per-application rules
###############################################################################

# These are portals to open/save files, which should always be floating and
# fixed size:
windowrule {
  name = portals
  float = on
  size = 800 500
  match:title = ^(Choose|Export|Open|Save) (Attachment|File|Folder|Project)s?$
}

# Claws-mail's address book should be a popup:
windowrule {
  name = claws-mail-addressbook
  float = on
  size = 800 500
  match:class = claws-mail
  match:title = .*[Aa]ddress book$
}

# Evolution's notifications must be small floating windows:
windowrule {
  name = evolution-notifications
  float = on
  size = 800 500
  match:class = evolution-alarm-notify
}

# Evolution's popupups must be a small floating window, but messages must be
# not:
windowrule {
  name = evolution-popups
  float = on
  size = 500 300
  match:class = org.gnome.Evolution
  no_initial_focus = on
  match:title = negative:(^(Fwd|Re|Compose).*|.*Evolution$)
}

# Godot's floating windows should have a fixed size:
windowrule {
  name = godot-floating
  size = 800 500
  match:float = 1
  match:initial_class = ^org.godotengine.*
}

# Netbeans's starting splash screen is evil:
windowrule {
  name = netbeans-splash
  tile = on
  match:class = ^Apache NetBeans.*
  match:initial_title = ^Apache NetBeans IDE.*
}

# Screen recorder overlay must be floating:
windowrule {
  name = wfrecorder
  float = on
  match:class = org.wf.recorder.gui
}



### Workspace pinning
###############################################################################

# Workspace 1:
windowrule {
  name = w01-vivaldi
  workspace = 1 silent
  match:class = [Vv]ivaldi-stable
}

windowrule {
  name = w01-firefox
  workspace = 1 silent
  match:class = firefox
}

windowrule {
  name = w01-cherrytree
  workspace = 1 silent
  match:class = cherrytree
}

windowrule {
  name = w01-claws-mail
  workspace = 1 silent
  match:class = claws-mail
}

windowrule {
  name = w01-evolution
  workspace = 1 silent
  match:class = (org.gnome.Evolution|evolution-alarm-notify)
}



# Workspace 2:
windowrule {
  name = w02-discord
  no_screen_share = on
  workspace = 2 silent
  match:class = discord
}

windowrule {
  name = w02-telegram
  no_screen_share = on
  workspace = 2 silent
  match:class = org.telegram.desktop
}

windowrule {
  name = w02-signal
  no_screen_share = on
  workspace = 2 silent
  match:class = signal
}

windowrule {
  name = w02-wasistlos
  no_screen_share = on
  workspace = 2 silent
  match:class = wasistlos
}



# Workspace 3:
windowrule {
  name = w03-netbeans
  workspace = 3 silent
  match:class = ^Apache NetBeans.*
}

windowrule {
  name = w03-netbeans-ide
  workspace = 3 silent
  match:class = java-lang-Thread
  match:title = Starting Apache NetBeans IDE
}

windowrule {
  name = w03-bruno
  workspace = 3 silent
  match:class = bruno
}



# Workspace 4:
windowrule {
  name = w04-bitwarden
  workspace = 4 silent
  no_screen_share = on
  match:class = Bitwarden
}

windowrule {
  name = w04-lm-studio
  workspace = 4 silent
  no_screen_share = on
  match:class = LM Studio
}



# Workspaces 5-6 are lawless.



# Workspace 7:
windowrule {
  name = w07-vmware
  workspace = 7 silent
  match:class = Vmware
}

# Workspace 8:
windowrule {
  name = w08-deluge
  workspace = 8 silent
  match:class = deluge
}

# Workspace 9:
windowrule {
  name = w09-godot
  workspace = 9 silent
  match:class = (org.godotengine.*|Godot)
}



### Workspace 10: the gaming one
###############################################################################

# Remove some fluff:
workspace = 10, gapsin:0, gapsout:0, border:false, shadow:false, \
                rounding:false, decorate:false
windowrule {
  name = w10-no-decorations
  no_anim = on
  no_blur = on
  no_dim = on
  match:workspace = 10
}

# All windows are floating, except Steam's main window:
windowrule {
  name = w10-all-floating
  float = on
  match:workspace = 10
  match:title = negative:^Steam$
}

# Attempt to make all non-launchers fullscreen:
windowrule {
  name = w10-non-launchers
  fullscreen = on
  match:workspace = 10
  match:title = negative:^(Origin|Ubisoft|Uplay).*
  match:class = negative:^[Ss]team$
}

# Attempt to pin game launchers in here:
windowrule {
  name = w10-steam-class
  workspace = 10 silent
  match:class = [Ss]team(webhelper|_app_.*)?
}

windowrule {
  name = w10-steam-title
  workspace = 10 silent
  match:title = ^Steam$
}

windowrule {
  name = w10-launchers
  workspace = 10 silent
  match:title = ^(Origin|Ubisoft|Uplay).*
}



### Special workspace: floating
###############################################################################

# All windows are floating and with a default size:
windowrule {
  name = special-floating
  float = on
  size = 800 500
  match:workspace = special:floating
}

# Simple toggle and moveto bindings:
bind = $mod, S, togglespecialworkspace, floating
bind = $mod SHIFT, S, movetoworkspacesilent, special:floating



### Special workspace: terminal
###############################################################################

# Make sure this workspace is quite plain, and starts a terminal if empty:
workspace = special:terminal, on-created-empty:$terminal

# Simple toggle binding:
bind = , F12, togglespecialworkspace, terminal

